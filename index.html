<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>無事故日数カウンター</title>
    <style>
        :root { --safety-green: #008542; --safety-yellow: #ffed00; }
        body { font-family: sans-serif; background-color: #f0f2f5; margin: 0; display: flex; justify-content: center; align-items: center; height: 100vh; text-align: center; }
        .card { width: 95%; max-width: 600px; background: white; border: 12px solid var(--safety-green); border-radius: 4px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); position: relative; }
        .slogan { background-color: var(--safety-yellow); padding: 25px 10px; font-size: 1.8rem; font-weight: bold; border-bottom: 5px solid #000; line-height: 1.4; color: #000; }
        .main { padding: 40px 20px; }
        .days { font-size: 9rem; font-weight: 900; color: var(--safety-green); line-height: 1; margin: 10px 0; font-family: 'Arial Black', sans-serif; }
        .footer { background-color: #f8f9fa; padding: 20px; border-top: 1px solid #ddd; font-size: 1.2rem; }
        /* 画面右下の隠しボタン（パスワード用） */
        .admin-btn { position: absolute; bottom: 0; right: 0; width: 60px; height: 60px; background: transparent; border: none; cursor: pointer; opacity: 0.1; }
    </style>
</head>
<body>
<div class="card">
    <div class="slogan">みんなで、さがそう危険な事<br>1人1人が責任者</div>
    <div class="main">
        <div style="font-weight:bold; font-size:1.2rem; color:#555;">継続無事故日数</div>
        <div class="days"><span id="days-val">0</span><small style="font-size:2rem;">日</small></div>
        <div id="start-date" style="color: #999; margin-top: 10px; font-size: 0.9rem;">記録開始日: --</div>
    </div>
    <div class="footer">過去の最長記録: <span id="longest-val">0</span> 日</div>
    <button class="admin-btn" onclick="adminReset()"></button>
</div>
<script>
    // パスワード設定
    const PWD = "5080";

    function update() {
        let start = localStorage.getItem('safety_start');
        let longest = localStorage.getItem('safety_longest') || 0;
        
        if (!start) {
            start = new Date().toISOString();
            localStorage.setItem('safety_start', start);
        }

        const diff = Math.floor((new Date() - new Date(start)) / 86400000);
        
        if (diff > longest) {
            longest = diff;
            localStorage.setItem('safety_longest', longest);
        }

        document.getElementById('days-val').innerText = diff;
        document.getElementById('longest-val').innerText = longest;
        document.getElementById('start-date').innerText = "記録開始日: " + new Date(start).toLocaleDateString();
    }

    function adminReset() {
        const input = prompt("管理者パスワードを入力してください：");
        if (input === PWD) {
            if (confirm("事故リセットを実行します。よろしいですか？")) {
                localStorage.setItem('safety_start', new Date().toISOString());
                update();
                alert("リセットしました。今日も安全に！");
            }
        } else if (input !== null) {
            alert("パスワードが違います。");
        }
    }

    update();
</script>
</body>
</html>
